<div class="wrapper">
  <h1>Your check-in details</h1>
  <form class="form" #myForm="ngForm" (ngSubmit)="submitForm(myForm)">
    <app-accordian-section
      [title]="'Personal information'"
      [filled]="detailsSectionFilled"
    >
      <input
        type="text"
        name="detailsSectionFields.firstName"
        [(ngModel)]="detailsSectionFields['firstName']"
        placeholder="First name"
        required
      />
      <input
        type="text"
        name="detailsSectionFields.lastName"
        [(ngModel)]="detailsSectionFields['lastName']"
        placeholder="Last name"
        required
      />
      <input
        type="email"
        name="detailsSectionFields.email"
        [(ngModel)]="detailsSectionFields['email']"
        placeholder="Email"
        #emailInput="ngModel"
        pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
        required
        [ngClass]="{
          inputError:
            emailInput.invalid && (emailInput.dirty || emailInput.touched)
        }"
      />
      <div
        class="inlineError"
        *ngIf="
          emailInput.invalid &&
          (emailInput.dirty || emailInput.touched) &&
          formSubmitted
        "
      >
        <span *ngIf="emailInput.errors?.['required']">Email is required.</span>
        <span *ngIf="emailInput.errors?.['pattern']"
          >Invalid email format.</span
        >
      </div>

      <!-- add phone validation -->
      <input
        type="text"
        name="detailsSectionFields.phoneNumber"
        [(ngModel)]="detailsSectionFields['phoneNumber']"
        placeholder="Phone number"
      />
    </app-accordian-section>

    <app-accordian-section [title]="'Address'" [filled]="adressSectionFilled">
      <input
        type="text"
        name="addressSectionFields.street"
        [(ngModel)]="addressSectionFields['street']"
        placeholder="Street"
        required
      />

      <div class="form-container">
        <div class="form-input">
          <input
            type="text"
            name="addressSectionFields.houseNumber"
            [(ngModel)]="addressSectionFields['houseNumber']"
            placeholder="House Nr."
            required
          />
        </div>

        <div class="form-input">
          <input
            type="text"
            name="addressSectionFields.postCode"
            [(ngModel)]="addressSectionFields['postCode']"
            placeholder="Zip code"
            required
          />
        </div>
      </div>

      <input
        type="text"
        name="addressSectionFields.city"
        [(ngModel)]="addressSectionFields['city']"
        placeholder="City Name"
        required
      />
      <input
        type="text"
        name="addressSectionFields.country"
        [(ngModel)]="addressSectionFields['country']"
        placeholder="Country"
      />
    </app-accordian-section>

    <app-accordian-section
      [title]="'Payment details'"
      [filled]="paymentSectionFilled"
    >
      <input
        type="text"
        name="paymentSectionFields.creditCardNumber"
        [(ngModel)]="paymentSectionFields['creditCardNumber']"
        placeholder="Credit card number"
      />

      <div class="form-container">
        <div class="form-input">
          <input
            type="text"
            name="paymentSectionFields.expiryDate"
            [(ngModel)]="paymentSectionFields['expiryDate']"
            placeholder="expiry date"
          />
        </div>

        <div class="form-input">
          <input
            type="text"
            name="paymentSectionFields.CVV"
            [(ngModel)]="paymentSectionFields['CVV']"
            placeholder="CVV"
          />
        </div>
      </div>

      <input
        type="text"
        name="paymentSectionFields.cardholderName"
        [(ngModel)]="paymentSectionFields['cardholderName']"
        placeholder="Cardholder Name"
      />
      <span class="footer">
        Enter your card details: its number, expiration date and, 3-digit number
        on the back of the card and the holder name.
      </span>
    </app-accordian-section>

    <!-- moved outside of the accordion section to that it is always visible -->
    <div>
      <button>Save</button>
    </div>
  </form>
</div>
